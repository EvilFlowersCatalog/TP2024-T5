"use strict";(self.webpackChunkglasskube_docs=self.webpackChunkglasskube_docs||[]).push([[7077],{2288:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>b,contentTitle:()=>u,default:()=>g,frontMatter:()=>d,metadata:()=>h,toc:()=>p});var t=n(4848),i=n(8453),a=n(4401),r=n(1852),o=n(7738),l=n(9489),c=n(7227);const d={title:"RabbitMQ on Kubernetes",slug:"rabbitmq",description:"Learn how to install RabbitMQ on Kubernetes",authors:["jpage"],tags:["rabbitmq"]},u=void 0,h={id:"rabbitmq",title:"RabbitMQ on Kubernetes",description:"Learn how to install RabbitMQ on Kubernetes",source:"@site/guides/05_rabbitmq.mdx",sourceDirName:".",slug:"/rabbitmq",permalink:"/TP2024-T5/guides/rabbitmq",draft:!1,unlisted:!1,tags:[{inline:!0,label:"rabbitmq",permalink:"/TP2024-T5/guides/tags/rabbitmq"}],version:"current",lastUpdatedBy:"RobertPrikryl",lastUpdatedAt:1728147151e3,sidebarPosition:5,frontMatter:{title:"RabbitMQ on Kubernetes",slug:"rabbitmq",description:"Learn how to install RabbitMQ on Kubernetes",authors:["jpage"],tags:["rabbitmq"]},sidebar:"guides",previous:{title:"Install ingress-nginx",permalink:"/TP2024-T5/guides/ingress-nginx"},next:{title:"Quickwit on Kubernetes",permalink:"/TP2024-T5/guides/Quickwit"}},b={},p=[{value:"Fundamentals",id:"fundamentals",level:2},{value:"Sync vs Async messaging \ud83d\udcdf",id:"sync-vs-async-messaging-",level:3},{value:"Producers and consumers \ud83d\udcf2",id:"producers-and-consumers-",level:3},{value:"Messaging Brokers \ud83c\udf9b\ufe0f",id:"messaging-brokers-\ufe0f",level:3},{value:"Other key components \ud83e\udde9",id:"other-key-components-",level:3},{value:"Messaging patterns \ud83c\udf10",id:"messaging-patterns-",level:3},{value:"Publish / Subscribe",id:"publish--subscribe",level:4},{value:"Worker queues",id:"worker-queues",level:4},{value:"Oh by the way",id:"oh-by-the-way",level:2},{value:"Benefits of messaging systems \ud83d\udc4d",id:"benefits-of-messaging-systems-",level:2},{value:"Scaling",id:"scaling",level:3},{value:"Batching",id:"batching",level:3},{value:"Architecture decoupling",id:"architecture-decoupling",level:3},{value:"Reliability and Persistence",id:"reliability-and-persistence",level:3},{value:"Use cases",id:"use-cases",level:2},{value:"Features of RabbitMQ \ud83e\uddf0",id:"features-of-rabbitmq-",level:2},{value:"Ease of use",id:"ease-of-use",level:3},{value:"Delivery Acknowledgement and consumer confirms",id:"delivery-acknowledgement-and-consumer-confirms",level:3},{value:"Distributed network",id:"distributed-network",level:3},{value:"Tools + plugins",id:"tools--plugins",level:3},{value:"RabbitMQ Installation methods",id:"rabbitmq-installation-methods",level:2},{value:"Docker \ud83d\udc33",id:"docker-",level:3},{value:"Open Source RabbitMQ Server on multiple operating systems",id:"open-source-rabbitmq-server-on-multiple-operating-systems",level:3},{value:"RabbitMQ Cluster Kubernetes Operator \u2638\ufe0f",id:"rabbitmq-cluster-kubernetes-operator-\ufe0f",level:3},{value:"Install the RabbitMQ Cluster Kubernetes Operator",id:"install-the-rabbitmq-cluster-kubernetes-operator",level:2},{value:"Installation",id:"installation",level:2},{value:"Install Glasskube",id:"install-glasskube",level:3},...o.RM,{value:"Install the RabbitMQ cluster operator",id:"install-the-rabbitmq-cluster-operator",level:3},{value:"Confirm Service Availability",id:"confirm-service-availability",level:2},{value:"Create a RabbitMQ Instance",id:"create-a-rabbitmq-instance",level:2},{value:"Configure a RabbitMQ Instance",id:"configure-a-rabbitmq-instance",level:2},{value:"Access the RabbitMQ dashboard on Kubernetes",id:"access-the-rabbitmq-dashboard-on-kubernetes",level:2},{value:"Create a queue \ud83d\ude83",id:"create-a-queue-",level:2},{value:"Option 1: Queue Declaration in a Producer App",id:"option-1-queue-declaration-in-a-producer-app",level:3},{value:"Option 2: RabbitMQ Configuration Files",id:"option-2-rabbitmq-configuration-files",level:3},{value:"Option 3: Management UI",id:"option-3-management-ui",level:3},{value:"<strong>User and Virtual Host Creation (Optional)</strong>",id:"user-and-virtual-host-creation-optional",level:4},{value:"Queue Creation via Management UI",id:"queue-creation-via-management-ui",level:4},{value:"Build a RabbitMQ cluster \ud83d\udc07",id:"build-a-rabbitmq-cluster-",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Quorum queues",id:"quorum-queues",level:3},{value:"Automatic Failover",id:"automatic-failover",level:3},{value:"Fault tolerance",id:"fault-tolerance",level:3},{value:"Add instances to the cluster \ud83e\udeb4",id:"add-instances-to-the-cluster-",level:2}];function m(e){const s={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/547e73fa-37dc-4b63-8ef5-bfc928f76d95",alt:"thumbnail"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/",children:"RabbitMQ"})," is an open-source message broker software that implements a handful of messaging protocols, originally the ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol",children:"AMQP"})," (Advanced Message Queuing Protocol), and also includes web-based ones such as ",(0,t.jsx)(s.a,{href:"https://stomp.github.io/",children:"STOMP"})," (Simple Text Orientated Messaging Protocol), ",(0,t.jsx)(s.a,{href:"https://mqtt.org/",children:"MQTT"})," (Message Queuing Telemetry Transport), and ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/WebSocket",children:"WebSockets"})," to decouple applications that share asynchronous data. RabbitMQ not only serves as an attractive messaging system choice due to its robustness and well-maintained open-source nature but also stands out for its ease of use and configuration. Before creating our first RabbitMQ instance and cluster, let's explore some fundamental concepts around messaging and check out some common use cases."]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["\u2139\ufe0f As of writing the latest RabbitMQ version is ",(0,t.jsx)(s.code,{children:"3.13.2"}),". See change log ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/release-information",children:"here"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"fundamentals",children:"Fundamentals"}),"\n",(0,t.jsx)(s.h3,{id:"sync-vs-async-messaging-",children:"Sync vs Async messaging \ud83d\udcdf"}),"\n",(0,t.jsxs)(s.p,{children:["In synchronous messaging, the sender waits for a response before proceeding, which can lead to ",(0,t.jsx)(s.strong,{children:"bottlenecks"})," or ",(0,t.jsx)(s.strong,{children:"inefficiencies"}),". Asynchronous messaging, on the other hand, frees up the sender by allowing messages to be sent without an immediate response, breaking the synchronous relationship between apps or microservices is known as ",(0,t.jsx)(s.code,{children:"decoupling"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["Messaging systems excel in scenarios requiring asynchronous communication. Decoupled applications that exchange high message volumes and depend on reliable delivery are prime candidates to use it. From ",(0,t.jsx)(s.code,{children:"distributed systems"})," to ",(0,t.jsx)(s.code,{children:"microservices architectures"})," and ",(0,t.jsx)(s.code,{children:"event-driven setups"}),", messaging brokers like RabbitMQ facilitate seamless communication across multipe diverse technological architectures."]}),"\n",(0,t.jsx)(s.h3,{id:"producers-and-consumers-",children:"Producers and consumers \ud83d\udcf2"}),"\n",(0,t.jsxs)(s.p,{children:["In its simplest form, the messaging graph looks like this: ",(0,t.jsx)(s.code,{children:"Producer - Queue - Consumer"})]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/84a407f5-f44e-4026-9058-ef95f0feffa2",alt:"Simple queue diagram"})}),"\n",(0,t.jsx)(s.h3,{id:"messaging-brokers-\ufe0f",children:"Messaging Brokers \ud83c\udf9b\ufe0f"}),"\n",(0,t.jsxs)(s.p,{children:["The Messaging broker is the core component of the messaging system, orchestrating the management of various messaging core entities, such as ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/connections",children:"connections"}),", ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/channels",children:"channels"}),", ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/queues",children:"queues"}),", and ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/e2e",children:"exchanges"})," among others."]}),"\n",(0,t.jsx)(s.p,{children:"As the central hub, the broker encompasses all RabbitMQ features, ranging from clustering and mirroring to GUI and plugin management. It facilitates communication between clients and the broker itself, adhering to the open standard AMQP protocol for message transportation."}),"\n",(0,t.jsx)(s.h3,{id:"other-key-components-",children:"Other key components \ud83e\udde9"}),"\n",(0,t.jsxs)(s.p,{children:["A producer application establishes a ",(0,t.jsx)(s.code,{children:"connection"})," with the messaging broker via a ",(0,t.jsx)(s.code,{children:"TCP connection"}),". Within this connection, ",(0,t.jsx)(s.code,{children:"multiple channels"})," can be created, serving to logically separate data flows. Each channel facilitates the transmission of data to a ",(0,t.jsx)(s.code,{children:"queue"}),". These queues act as intermediary storage, from which ",(0,t.jsx)(s.code,{children:"consumer apps"})," connect to consume messages from. If the ",(0,t.jsx)(s.code,{children:"Pub/Sub messaging pattern"})," is used, an ",(0,t.jsx)(s.code,{children:"exchange"})," might also be present."]}),"\n",(0,t.jsxs)(s.p,{children:["RabbitMQ also introduces the concept of virtual hosts ",(0,t.jsx)(s.code,{children:"(vhosts)"})," to partition and isolate messaging resources within the broker, enabling distinct environments or applications to operate independently within the same RabbitMQ instance, and enhancing security and manageability."]}),"\n",(0,t.jsxs)(s.p,{children:["In scenarios demanding heightened fault tolerance and message reliability, messaging ",(0,t.jsx)(s.code,{children:"replicas"})," come into play. These ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/quorum-queues#replication",children:"replicas"}),", used in ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/quorum-queues",children:"quorum"})," queues, ensure data redundancy and resilience by maintaining synchronized copies of messages across multiple nodes or clusters."]}),"\n",(0,t.jsx)(s.h3,{id:"messaging-patterns-",children:"Messaging patterns \ud83c\udf10"}),"\n",(0,t.jsx)(s.h4,{id:"publish--subscribe",children:"Publish / Subscribe"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.strong,{children:"Pub/Sub"})," pattern is used to broadcast messages to multiple subscribers who are interested in receiving notification updates. Here, instead of publishing a message to a single queue, messages are processed by an exchange which then routes the messages to multiple queues based on predetermined routing ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/tutorials/tutorial-four-go",children:"rules"})," and ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/tutorials/tutorial-four-go#bindings",children:"bindings"}),". Each queue is bound to the exchange with a routing key."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/0660831b-4b3b-46dd-9213-aa2df179a34c",alt:"Pub/Sub pattern"})}),"\n",(0,t.jsx)(s.h4,{id:"worker-queues",children:"Worker queues"}),"\n",(0,t.jsx)(s.p,{children:"Worker queues are a way to distribute and parallelize the processing of tasks or messages across multiple workers or consumers. It can be simpler than the Pub/Sub pattern since it doesn\u2019t have the added abstraction of an exchange agent. In this pattern, tasks or messages are published to a single queue. Multiple workers consume messages from this queue, with each worker processing tasks independently."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/866e0eb5-7fd2-44cf-814b-103a04fa4b95",alt:"worker-queue"})}),"\n",(0,t.jsx)(s.h2,{id:"oh-by-the-way",children:"Oh by the way"}),"\n",(0,t.jsxs)(s.p,{children:["If you are a fan of supporting Open Source projects working to make Kubernetes package management better for everyone then please consider supporting Glasskube, by giving us a Star on ",(0,t.jsx)(s.a,{href:"https://github.com/glasskube/glasskube",children:"GitHub"})," \ud83d\ude4f"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://github.com/glasskube/glasskube",children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/05a03edf-7d6a-48fd-9b24-598abcfd1e9a",alt:"Worker queue pattern"})})}),"\n",(0,t.jsx)(s.h2,{id:"benefits-of-messaging-systems-",children:"Benefits of messaging systems \ud83d\udc4d"}),"\n",(0,t.jsx)(s.h3,{id:"scaling",children:"Scaling"}),"\n",(0,t.jsxs)(s.p,{children:["Queues can be added to ",(0,t.jsx)(s.code,{children:"expand capacity"})," if needed. Even multiple broker nodes can be coupled to form messaging ",(0,t.jsx)(s.code,{children:"clusters"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"batching",children:"Batching"}),"\n",(0,t.jsxs)(s.p,{children:["Batching involves grouping multiple messages into a single batch or bundle before transmitting them over the network. This can positively impact ",(0,t.jsx)(s.strong,{children:"performance"}),", ",(0,t.jsx)(s.strong,{children:"efficiency"}),", and ",(0,t.jsx)(s.strong,{children:"resource utilization"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"architecture-decoupling",children:"Architecture decoupling"}),"\n",(0,t.jsxs)(s.p,{children:["Applications can be developed and scaled ",(0,t.jsx)(s.strong,{children:"independently"}),", optimizing ",(0,t.jsx)(s.strong,{children:"resource usage"})," and ",(0,t.jsx)(s.strong,{children:"interoperability"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"reliability-and-persistence",children:"Reliability and Persistence"}),"\n",(0,t.jsxs)(s.p,{children:["By ",(0,t.jsx)(s.code,{children:"clustering"}),", ",(0,t.jsx)(s.code,{children:"replicating"})," and ",(0,t.jsx)(s.code,{children:"node federation"}),", no node or storage volume is fully responsible for data persistence. No node need be a single point of failure."]}),"\n",(0,t.jsx)(s.h2,{id:"use-cases",children:"Use cases"}),"\n",(0,t.jsx)(s.p,{children:"So which architectures or apps might benefit the most from messaging systems? Think of those that require asynchronous communication, scalability, reliability, and decoupling between components. Solutions like social media apps, financial services, IoT products, telecommunication apps, and supply chain management tools are just a few."}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Messaging app example:"})," ",(0,t.jsx)(s.strong,{children:"\ud83d\udcac"})]}),"\n",(0,t.jsx)(s.p,{children:"For instance, every time you receive a message on WhatsApp or via text, the message payload is processed asynchronously using queues."}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Financial app example:"})," ",(0,t.jsx)(s.strong,{children:"\ud83d\udcc8"})]}),"\n",(0,t.jsx)(s.p,{children:"The same goes for when you use a financial app to put a buy order on your favorite stock. The buy details will be delivered from the front end of the producer app to the queue so that a backend consumer app can pick it up and continue processing your buy order."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"       +-------------+\r\n       |  Financial  |\r\n       |    App      |\r\n       +------+------+               +-----------------+\r\n              |                      |                 |\r\n              v                      |    RabbitMQ     |\r\n  +-----------+-----------+          |    Broker       |\r\n  |                       |          |                 |\r\n  |  User Initiates Buy   +---------\x3e+   Queue         |\r\n  |      Order            |          |                 |\r\n  |                       |          +-----------------+\r\n  +-----------+-----------+                    |\r\n              |                                |\r\n              v                                |\r\n       +-------------+                         |\r\n       |  Consumer   |                         |\r\n       |    App      |<------------------------+\r\n       +-------------+\r\n\n"})}),"\n",(0,t.jsx)(s.h2,{id:"features-of-rabbitmq-",children:"Features of RabbitMQ \ud83e\uddf0"}),"\n",(0,t.jsx)(s.h3,{id:"ease-of-use",children:"Ease of use"}),"\n",(0,t.jsx)(s.p,{children:"Compared to other messaging systems, RabbitMQ\u2019s simplicity of configuration and use stands out among the rest."}),"\n",(0,t.jsx)(s.h3,{id:"delivery-acknowledgement-and-consumer-confirms",children:"Delivery Acknowledgement and consumer confirms"}),"\n",(0,t.jsxs)(s.p,{children:["Typical of synchronous communication but less present in async is a received acknowledgment when a message was successfully consumed. RabbitMQ has a ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/confirms",children:"feature"})," that can be enabled to achieve this."]}),"\n",(0,t.jsx)(s.h3,{id:"distributed-network",children:"Distributed network"}),"\n",(0,t.jsxs)(s.p,{children:["RabbitMQ as a messaging broker fits into distributed architectures, using producer and consumer apps connecting from remote hosts, this makes it desirable for the RabbitMQ broker to also be distributed there are three ways to accomplish this: ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/distributed",children:"clustering, federations, or the shovel plugin"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"tools--plugins",children:"Tools + plugins"}),"\n",(0,t.jsxs)(s.p,{children:["RabbitMQ has a series of tools and ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/plugins",children:"plugins"})," to make managment and configuration much easier. Just as the management plugin which delivers a useful GUI from which mange management and monitoring tasks can be done as well as deployment plugins. Some useful plugins"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"rabbitmq_management:"})," for management console access"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"rabbitmq_prometheus:"})," exports metrics in Prometheus-compatible format, facilitating monitoring and observability."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"rabbitmq_federation:"})," enables cluster and exchange formation and data replication"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"rabbitmq_peer_discovery_k8s:"})," used for automatic node discovery (cluster formation) in k8s environments"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["RabbitMQ comes with some useful CLI tools ",(0,t.jsx)(s.code,{children:"rabbitmqcli"})," ,",(0,t.jsx)(s.code,{children:"rabbitmq-plugins"}),",",(0,t.jsx)(s.code,{children:"rabbitmqadmin"})," and ",(0,t.jsx)(s.code,{children:"rabbitmq-queues"}),". To be executed inside the RabbitMQ nodes they enable cluster management, plugin configurations, and an array of customizations."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"rabbitmq-installation-methods",children:"RabbitMQ Installation methods"}),"\n",(0,t.jsx)(s.h3,{id:"docker-",children:"Docker \ud83d\udc33"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"# latest RabbitMQ 3.13\r\ndocker run -it --rm --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:3.13-management\n"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["\u2139\ufe0f Check out a great in-depth installation ",(0,t.jsx)(s.a,{href:"https://www.youtube.com/watch?v=hfUIWe1tK8E",children:"guide"})," from Marcel Dempers using Docker"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"open-source-rabbitmq-server-on-multiple-operating-systems",children:"Open Source RabbitMQ Server on multiple operating systems"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Linux: (",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/install-debian",children:"Debian"}),", ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/install-rpm",children:"RHEL, CentOS Stream, Fedora, Amazon Linux 2023"}),")"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/install-windows",children:"Windows"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/install-homebrew",children:"MacOS"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"rabbitmq-cluster-kubernetes-operator-\ufe0f",children:"RabbitMQ Cluster Kubernetes Operator \u2638\ufe0f"}),"\n",(0,t.jsx)(s.p,{children:"We will focus on this installation method since it\u2019s the recommended method for working with RabbitMQ in Kubernetes environments."}),"\n",(0,t.jsx)(s.h2,{id:"install-the-rabbitmq-cluster-kubernetes-operator",children:"Install the RabbitMQ Cluster Kubernetes Operator"}),"\n",(0,t.jsx)(s.p,{children:"The RabbitMQ Cluster Kubernetes Operator automates the provisioning, management, and operations of RabbitMQ clusters running on Kubernetes."}),"\n",(0,t.jsx)(s.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(s.p,{children:"Installing the RabbitMQ cluster operator can easily be achieved with the Glasskube package manager."}),"\n",(0,t.jsx)(s.h3,{id:"install-glasskube",children:"Install Glasskube"}),"\n",(0,t.jsxs)(s.p,{children:["If you already installed ",(0,t.jsx)(s.code,{children:"glasskube"})," you can skip this step.\r\nIf not, ",(0,t.jsx)(s.code,{children:"glasskube"})," can easily be installed the way you usually install packages for your operating system."]}),"\n",(0,t.jsx)(o.Ay,{}),"\n",(0,t.jsx)(s.h3,{id:"install-the-rabbitmq-cluster-operator",children:"Install the RabbitMQ cluster operator"}),"\n",(0,t.jsxs)(l.A,{groupId:"interface",children:[(0,t.jsxs)(c.A,{value:"gui",label:"GUI \ud83d\udda5\ufe0f",children:[(0,t.jsx)(s.p,{children:"Start the UI via the command line:"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"glasskube serve\n"})}),(0,t.jsx)(s.p,{children:"Install RabbitMQ cluster operator via the Glasskube UI."})]}),(0,t.jsxs)(c.A,{value:"cli",label:"CLI \ud83e\uddd1\u200d\ud83d\udcbb",children:[(0,t.jsx)(s.p,{children:"A package can be installed with a simple command."}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"glasskube install rabbitmq-operator\n"})}),(0,t.jsx)(s.p,{children:"The process will wait until the package got successfully installed."})]})]}),"\n",(0,t.jsxs)(s.p,{children:["You will need access to a Kubernetes cluster running ",(0,t.jsx)(s.code,{children:"Kubernetes 1.19"})," or later (You can easily create a local cluster by using ",(0,t.jsx)(s.a,{href:"https://minikube.sigs.k8s.io/docs/",children:"Minikube"}),") ",(0,t.jsx)(s.code,{children:"kubectl"})," isn\u2019t strictly speaking a dependency for installing packages via Glasskube, but it is the recommended way to interact with the cluster. Therefore, it is highly recommended. Installation instructions are available for macOS, Linux, and Windows."]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["\u2139\ufe0f Glasskube will automatically install the cluster operator in a newly created namespace called ",(0,t.jsx)(s.code,{children:"rabbitmq-system"})]}),"\n"]}),"\n",(0,t.jsxs)(s.h2,{id:"confirm-service-availability",children:["Confirm Service Availability",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/kubernetes/operator/using-operator#service-availability",title:"Direct link to Confirm Service Availability"})]}),"\n",(0,t.jsxs)(s.p,{children:["Before configuring your app to use RabbitMQ Cluster Kubernetes Operator, ensure that ",(0,t.jsx)(s.code,{children:"RabbitmqCluster"})," Custom Resource is deployed to your Kubernetes cluster and is available."]}),"\n",(0,t.jsx)(s.p,{children:"To confirm this availability, run"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"kubectl get customresourcedefinitions.apiextensions.k8s.io\n"})}),"\n",(0,t.jsxs)(s.h2,{id:"create-a-rabbitmq-instance",children:["Create a RabbitMQ Instance",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/kubernetes/operator/using-operator#create",title:"Direct link to Create a RabbitMQ Instance"})]}),"\n",(0,t.jsxs)(s.p,{children:["The RabbitMQ Cluster Kubernetes Operator creates the necessary resources, such as ",(0,t.jsx)(s.code,{children:"Services"}),", ",(0,t.jsx)(s.code,{children:"StatefulSets"}),", ",(0,t.jsx)(s.code,{children:"Secrets"})," and ",(0,t.jsx)(s.code,{children:"ConfigMaps"})," in the same namespace in which the ",(0,t.jsx)(s.code,{children:"RabbitmqCluster"})," was defined."]}),"\n",(0,t.jsxs)(s.p,{children:["First, create a YAML file to define a ",(0,t.jsx)(s.code,{children:"RabbitmqCluster"})," resource named definition.yaml."]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["\u2139\ufe0f ",(0,t.jsx)(s.strong,{children:"Note:"})," The YAML file can have any name, but the steps that follow assume it is called ",(0,t.jsx)(s.code,{children:"definition.yaml"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Then copy and paste the below snippet into the file and save it:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"apiVersion: rabbitmq.com/v1beta1\r\nkind: RabbitmqCluster\r\nmetadata:\r\n  name: definition\n"})}),"\n",(0,t.jsx)(s.p,{children:"Next, apply the definition by running:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"kubectl apply -f definition.yaml\n"})}),"\n",(0,t.jsx)(s.p,{children:"Then verify that the process was successful by running:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"kubectl get all -l app.kubernetes.io/name=definition\n"})}),"\n",(0,t.jsxs)(s.h2,{id:"configure-a-rabbitmq-instance",children:["Configure a RabbitMQ Instance",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/kubernetes/operator/using-operator#configure",title:"Direct link to Configure a RabbitMQ Instance"})]}),"\n",(0,t.jsx)(s.p,{children:"To configure a RabbitMQ instance in other words the cluster itself, open definition.yaml or edit the configuration in place by running:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"kubectl edit rabbitmqcluster definition\n"})}),"\n",(0,t.jsx)(s.p,{children:"By default all of the required manifests and objects to support your RabbitMQ have been created, to edit them you simply have to edit the Kubernetes manifest files."}),"\n",(0,t.jsx)(s.h2,{id:"access-the-rabbitmq-dashboard-on-kubernetes",children:"Access the RabbitMQ dashboard on Kubernetes"}),"\n",(0,t.jsxs)(s.p,{children:["You can access the RabbitMQ management dashboard in multiple ways but editing the service object and using a load balancer. The quickest way that does not require you to change any default configuration is by port-forwarding the ",(0,t.jsx)(s.code,{children:"definition-server-0"})," pod."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"kubectl port-forward -n rabbitmq-system definition-server-0 8080:15672\n"})}),"\n",(0,t.jsx)(s.p,{children:"Then you can access the dashboard login page to access the console. To find the credentials to access your deployment you will have to decode the username and password in the provisioned Kubernetes secret."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"kubectl get secret definition-default-user -n rabbitmq-system -o yaml\n"})}),"\n",(0,t.jsx)(s.p,{children:"The output will be something like this:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"apiVersion: v1\r\ndata:\r\n  default_user.conf: ZGVmYXVsdF91c2VYXVsdF91c2VyXzhMZklqOGFFQmROZmcKZGVmYXVsdF9wYXNzID0gd3IyWTl3MVJLMUtOdWN2S2ptS0FaX2R3dlRDSEhiYWEK\r\n  host: ZGVmaW5pdGlvbi5yYWJiaXRtcS1zeXN0ZW0uc3Zj\r\n  password: d3IyWTl3MVJLMUtOdWN2S2ptR3dlRDSEhiYWE=\r\n  port: NTYMg==\r\n  provider: cmFiml0bXE=\r\n  type: cmFiYmlbXE=\r\n  username: ZGVmYXVsdF91c2VMZklqFFQmRsbHd4b1BOZmc=\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Decode the base64 ",(0,t.jsx)(s.code,{children:"password"})," and ",(0,t.jsx)(s.code,{children:"username"})," values and pass output into the login page"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"# Password\r\n\u279c  ~ echo -n d3IyWTl3MVJLMUtOdW2S2ptS0FaX2R3dlRDSEhiYWE=  | base64 --decode\r\nwr2Y9w1RK1KNucvKjmKAZ_dwvTCHHba%\r\n# Username\r\n\u279c  ~ echo -n ZGVmYXVsdF91c2VyXhMZklqOGFFQmRsbHd4b1BOZmc=  | base64 --decode\r\ndefault_user_8LfIj8aEBdllwxoPNf%\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/f90e367d-fa87-47f4-93b2-017c96757f68",alt:"RabbitMQ dashboard"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["\u2139\ufe0f To monitor your RabbitMQ instance check out this ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/kubernetes/operator/operator-monitoring",children:"documentation"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"create-a-queue-",children:"Create a queue \ud83d\ude83"}),"\n",(0,t.jsx)(s.p,{children:"There are multiple ways to declare queues in RabbitMQ, depending on your workflow and preferences."}),"\n",(0,t.jsx)(s.h3,{id:"option-1-queue-declaration-in-a-producer-app",children:"Option 1: Queue Declaration in a Producer App"}),"\n",(0,t.jsx)(s.p,{children:"In most cases, you'll declare a queue within the producer app written in your preferred programming language. When the app publishes its first message, the queue declaration will automatically create the queue if it doesn't already exist. This approach allows for dynamic queue creation as needed."}),"\n",(0,t.jsx)(s.h3,{id:"option-2-rabbitmq-configuration-files",children:"Option 2: RabbitMQ Configuration Files"}),"\n",(0,t.jsxs)(s.p,{children:["Alternatively, you can use RabbitMQ ",(0,t.jsx)(s.a,{href:"https://github.com/rabbitmq/cluster-operator/blob/main/docs/examples/import-definitions/definitions.json",children:"configuration files"})," to declare multiple types of RabbitMQ objects, including ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/vhosts",children:"vhosts"}),", ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/channels",children:"channels"}),", ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/tutorials/amqp-concepts",children:"exchanges"}),", and ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/queues",children:"queues"}),". This method provides a more structured approach to managing RabbitMQ resources and configurations."]}),"\n",(0,t.jsx)(s.h3,{id:"option-3-management-ui",children:"Option 3: Management UI"}),"\n",(0,t.jsx)(s.p,{children:"For manual management, you can create queues directly from the RabbitMQ Management UI. It provides a user-friendly interface for interacting with RabbitMQ, allowing you to perform administrative tasks without using the command line."}),"\n",(0,t.jsx)(s.h4,{id:"user-and-virtual-host-creation-optional",children:(0,t.jsx)(s.strong,{children:"User and Virtual Host Creation (Optional)"})}),"\n",(0,t.jsx)(s.p,{children:"Before creating queues, it's recommended to set up users and virtual hosts to organize messaging workflows effectively. For example:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:'rabbitmqctl add_user jake jakepassword\r\nrabbitmqctl set_user_tags jake administrator\r\nrabbitmqctl set_permissions -p / jake ".*" ".*" ".*"\r\nrabbitmqctl add_vhost vhost-1\r\nrabbitmqctl set_permissions -p vhost-1 jake ".*" ".*" ".*"\n'})}),"\n",(0,t.jsx)(s.h4,{id:"queue-creation-via-management-ui",children:"Queue Creation via Management UI"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Access RabbitMQ Management Console"}),": Open the RabbitMQ Management UI in your web browser."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Login with Credentials"}),": Use the credentials of the user you created (e.g., username: ",(0,t.jsx)(s.strong,{children:"jake"}),", password: ",(0,t.jsx)(s.strong,{children:"jakepassword"}),") to log in to the Management UI."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Navigate to Queues Section"}),': Click on the "Queues" tab in the Management UI to view existing queues.']}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Add Queue"}),': Scroll to the bottom of the page and click on the "Add a new queue" button to create a new queue.']}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Specify the queue name, type, and other desired properties like node preference."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Optionally, configure queue bindings, policies, and other advanced settings based on your requirements."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Save Changes"}),': Click on the "Add queue" or "Save" button to confirm and create the new queue.']}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"By following these steps, you can easily create and manage queues in RabbitMQ according to your specific needs."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/b64a79c8-3b9c-4bfc-bef0-41344dc4eae5",alt:"Create a queue via the UI"})}),"\n",(0,t.jsx)(s.p,{children:"The queue is now ready:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/bae29873-901a-47d2-955b-8838f9023a55",alt:"The queue is live"})}),"\n",(0,t.jsx)(s.h2,{id:"build-a-rabbitmq-cluster-",children:"Build a RabbitMQ cluster \ud83d\udc07"}),"\n",(0,t.jsx)(s.p,{children:"When building a production application with a messaging component to its architecture, considerations around high availability must be made. RabbitMQ offers a clustering feature that consists of joining multiple RabbitMQ brokers and replicating the configuration and the data contained inside the message queues."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/69b9d748-f616-4944-8a4f-b0d9f0aed85f",alt:"rabbitmq-cluster-graph"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"\u2139\ufe0f To understand how clusters are formed we will need to understand a few concepts.\r\nBy using the operator, much of the concepts we explore below will be configured for you by default. Nonetheless, it\u2019s still valuable to understand what is happening under the hood."}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"authentication",children:"Authentication"}),"\n",(0,t.jsx)(s.p,{children:"For a RabbitMQ node to join forces and form a cluster with another node that need to share an Erlang cookie environment variable. This will ensure that nodes share the configuration data needed to consider themselves a cluster. This doesn\u2019t ensure queue data replication though. This is where the concept of mirroring comes in."}),"\n",(0,t.jsx)(s.h3,{id:"quorum-queues",children:"Quorum queues"}),"\n",(0,t.jsxs)(s.p,{children:["The RabbitMQ quorum queue is a modern queue type, which implements a durable, replicated FIFO queue based on the ",(0,t.jsx)(s.a,{href:"https://raft.github.io/",children:"Raft consensus algorithm"}),". Previously Classic Mirrored Queues were recommended but they have since been deprecated. Quorum queues are implemented much the same way yet they offer high availability via replication and focus on data safety. Policies can be applied to queues and it\u2019s through these policies that we can configure the mirroring specification."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Queue declaration"})}),"\n",(0,t.jsx)(s.p,{children:"In the past, replication of queues was specified by using policies in conjunction with Classic Queues. Quorum queues are created differently but should be compatible with all client applications which allow you to provide arguments when declaring a queue. The x-queue-type argument needs to be provided with the value quorum when creating the queue. For example, using the Elixir AMQP client1, declaring a Quorum Queue is as follows:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:'Queue.declare(publisher_chan, "my-quorum-queue", durable: true, arguments: [ "x-queue-type": "quorum" ])\n'})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["\u2139\ufe0f Manage quorum queues easily by using the ",(0,t.jsx)(s.code,{children:"rabbitmq-queues"})," CLI. Here are some useful CLI ",(0,t.jsx)(s.a,{href:"https://github.com/rabbitmq/rabbitmq-server/blob/main/deps/rabbit/docs/rabbitmq-queues.8",children:"commands"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"automatic-failover",children:"Automatic Failover"}),"\n",(0,t.jsxs)(s.p,{children:["Each quorum queue is made up by a primary replica, known as the ",(0,t.jsx)(s.code,{children:"leader"})," in ",(0,t.jsx)(s.a,{href:"https://raft.github.io/",children:"Raft"})," terminology, along with potentially multiple secondary replicas, referred to as ",(0,t.jsx)(s.code,{children:"followers"}),"."]}),"\n",(0,t.jsx)(s.p,{children:"Initially, a leader is elected when the cluster is formed, and subsequently, if the current leader becomes unavailable."}),"\n",(0,t.jsx)(s.p,{children:"Suppose a node hosting the leader of a quorum queue fails or stops for any reason. In that case, another node hosting one of the followers for that quorum queue will assume leadership and resume operations."}),"\n",(0,t.jsx)(s.p,{children:'When failed or rejoining followers come back online, they undergo a process of resynchronization, commonly known as "catching up," with the leader. Unlike traditional mirrored queues, where a temporary replica failure requires a full resynchronization from the current leader, only the differential changes are transferred if a rejoining replica lags behind the leader.'}),"\n",(0,t.jsx)(s.h3,{id:"fault-tolerance",children:"Fault tolerance"}),"\n",(0,t.jsxs)(s.p,{children:["For optimal performance in RabbitMQ clusters, it's beneficial to constrain the quorum queue size to a smaller, ",(0,t.jsx)(s.code,{children:"odd number"})," of nodes."]}),"\n",(0,t.jsx)(s.p,{children:"It's also worth mentioning that performance tends to degrade noticeably with quorum queue node sizes that exceed 5. Therefore, it\u2019s strongly advised against deploying quorum queues on more than 7 RabbitMQ nodes."}),"\n",(0,t.jsx)(s.h2,{id:"add-instances-to-the-cluster-",children:"Add instances to the cluster \ud83e\udeb4"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["\u2139\ufe0f Upon deployment, the cluster operator automatically generates a set of Kubernetes manifest files defining the default configurations for the RabbitMQ instance. You can inspect these configurations using the following command: Run ",(0,t.jsx)(s.code,{children:"k get all -n rabbitmq-admin"})," to see all created objects. These default configurations can be customized and updated to better align with your specific requirements and preferences."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["The RabbitMQ Kubernetes operator simplifies the setup process by handling essential tasks such as Mirroring, Failover, and Node federation automatically. This means that creating a RabbitMQ cluster is as straightforward as adjusting the number of replicas in the ",(0,t.jsx)(s.code,{children:"RabbitmqCluster"})," definition file. With these capabilities built-in, managing RabbitMQ clusters becomes much more seamless and hassle-free."]}),"\n",(0,t.jsxs)(s.p,{children:["Here I updated the ",(0,t.jsx)(s.code,{children:"RabbitmqCluster"})," manifest to scale to ",(0,t.jsx)(s.code,{children:"3"})," replicas:"]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["\u2139\ufe0f When specifying the number of replicas for the ",(0,t.jsx)(s.code,{children:"RabbitmqCluster"})," object ",(0,t.jsx)(s.a,{href:"https://www.rabbitmq.com/docs/clustering#node-count",children:"an even number of replicas is highly discouraged"}),". Odd numbers (1, 3, 5, 7, and so on) must be used."]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:'apiVersion: rabbitmq.com/v1beta1\r\nkind: RabbitmqCluster\r\nmetadata:\r\n  annotations:\r\n    kubectl.kubernetes.io/last-applied-configuration: |\r\n      {"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","metadata":{"annotations":{},"name":"definition","namespace":"rabbitmq-system"}}\r\n  creationTimestamp: "2024-05-07T17:04:53Z"\r\n  finalizers:\r\n  - deletion.finalizers.rabbitmqclusters.rabbitmq.com\r\n  generation: 6\r\n  name: definition\r\n  namespace: rabbitmq-system\r\n  resourceVersion: "2729957"\r\n  uid: f9b4cad8-68b4-489e-b7a1-baa3b91882d5\r\nspec:\r\n  delayStartSeconds: 30\r\n  image: rabbitmq:3.13.1-management\r\n  override: {}\r\n  persistence:\r\n    storage: 10Gi\r\n  rabbitmq:\r\n    additionalConfig: |\r\n      load_definitions = /etc/rabbitmq/definitions.json\r\n  replicas: 3 # added three replicas which will for the RabbitMQ cluster\r\n  resources:\r\n    limits:\r\n      cpu: "2"\r\n      memory: 2Gi\r\n    requests:\r\n      cpu: "1"\r\n      memory: 2Gi\r\n  secretBackend:\r\n    externalSecret: {}\r\n  service:\r\n    type: ClusterIP\r\n  terminationGracePeriodSeconds: 604800\r\n...\n'})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/231868a4-2c14-490d-b164-a9417f5c6344",alt:"RabbitMQ cluster view in dashboard"})}),"\n",(0,t.jsx)(s.p,{children:"Not only have the nodes been added to the cluster but the queue has been automatically replicated to all cluster nodes too"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/5d1520ec-3e70-409d-8c66-a7873485e86a",alt:"Queue replication"})}),"\n",(0,t.jsxs)(s.p,{children:["Messaging brokers such as RabbitMQ play a central role in ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Event-driven_architecture",children:"event-driven architectures"}),", offering ",(0,t.jsx)(s.code,{children:"flexibility"})," for ",(0,t.jsx)(s.code,{children:"task processing"}),", ",(0,t.jsx)(s.code,{children:"workflow orchestration"}),", and ",(0,t.jsx)(s.code,{children:"service integrations"})," while offering a selection of ",(0,t.jsx)(s.code,{children:"messaging patterns"})," to choose from to best suit your architecture. An obvious choice when prioritizing ",(0,t.jsx)(s.code,{children:"delivery reliability"})," and ",(0,t.jsx)(s.code,{children:"fault tolerance"}),", due to its native acknowledgment and message persistence features."]}),"\n",(0,t.jsxs)(s.p,{children:["Getting started with RabbitMQ is easier than ever especially now that ",(0,t.jsx)(s.a,{href:"https://github.com/glasskube/glasskube",children:"Glasskube"})," integrates the cluster controller for easy installation and management. This guide aims to offer the necessary insights for setting up a functional instance or RabbitMQ cluster within a Kubernetes environment. While there's so much more to learn regarding RabbitMQ such as this and that, I hope this primer provides ample groundwork to kickstart your RabbitMQ journey."]}),"\n",(0,t.jsxs)(s.p,{children:["If you like this sort of content and would like to see more of it, please consider supporting us by giving us a Star on ",(0,t.jsx)(s.a,{href:"https://github.com/glasskube/glasskube",children:"GitHub"})," \ud83d\ude4f\r\n",(0,t.jsx)(s.a,{href:"https://github.com/glasskube/glasskube",children:(0,t.jsx)(s.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/05a03edf-7d6a-48fd-9b24-598abcfd1e9a",alt:"cats-like--github-stars"})})]}),"\n",(0,t.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,t.jsx)(a.A,{href:"https://github.com/glasskube/glasskube"})}),"\n",(0,t.jsx)(r.Ay,{category:"Guides",categoryId:"DIC_kwDOLDumD84CfK3R"})]})}function g(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}},7738:(e,s,n)=>{n.d(s,{Ay:()=>c,RM:()=>o});var t=n(4848),i=n(8453),a=n(9489),r=n(7227);const o=[];function l(e){const s={a:"a",code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components},{Details:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.A,{groupId:"operating-systems",children:[(0,t.jsxs)(r.A,{value:"mac",label:"macOS",children:[(0,t.jsxs)(s.p,{children:["On macOS, you can use ",(0,t.jsx)(s.a,{href:"https://brew.sh/",children:"Homebrew"})," to install and update Glasskube."]}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"brew install glasskube/tap/glasskube\n"})})]}),(0,t.jsxs)(r.A,{value:"linux",label:"Linux",children:[(0,t.jsx)(s.p,{children:"You can install Glasskube using one of the package managers below."}),(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"RPM-based installation (RedHat/CentOS/Fedora)"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"dnf install https://releases.dl.glasskube.dev/glasskube_v0.24.0_amd64.rpm\n"})})]}),(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"DEB-based installation (Ubuntu/Debian)"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"curl -LO https://releases.dl.glasskube.dev/glasskube_v0.24.0_amd64.deb\r\nsudo dpkg -i glasskube_v0.24.0_amd64.deb\n"})})]}),(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"APK-based installation (Alpine)"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"curl -LO https://releases.dl.glasskube.dev/glasskube_v0.24.0_amd64.apk\r\napk add --allow-untrusted glasskube_v0.24.0_amd64.apk\n"})})]}),(0,t.jsxs)(s.p,{children:["If you are using a distribution that does not use one of the package managers above, or require a 32-bit binary,\r\ncheck out additional download options attached to our ",(0,t.jsx)(s.a,{href:"https://github.com/glasskube/glasskube/releases/latest",children:"latest release"}),"."]})]}),(0,t.jsx)(r.A,{value:"win",label:"Windows",children:(0,t.jsxs)(s.p,{children:["Download the ",(0,t.jsx)(s.a,{href:"https://releases.dl.glasskube.dev/glasskube_v0.24.0_windows_x86_64.zip",children:"windows archive"})," from our\r\nlatest ",(0,t.jsx)(s.a,{href:"https://github.com/glasskube/glasskube/releases/latest",children:"Release"})," and unpack it using Windows Explorer."]})}),(0,t.jsxs)(r.A,{value:"nixos",label:"NixOS/Nixpkgs",children:[(0,t.jsxs)(s.p,{children:["You can either use the package temporarily in a ",(0,t.jsx)("b",{children:"nix-shell"}),":"]}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"nix-shell -p glasskube\n"})}),(0,t.jsxs)(s.p,{children:["Or install it globally by adding ",(0,t.jsx)(s.code,{children:"pkgs.glasskube"})," to your ",(0,t.jsx)(s.code,{children:"environment.systemPackages"}),"."]})]})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(s.p,{children:["After installing Glasskube on your local machine, make sure to install the necessary components in your Kubernetes cluster by running ",(0,t.jsx)(s.code,{children:"glasskube bootstrap"}),".\r\nFor more information, check out our ",(0,t.jsx)(s.a,{href:"/docs/getting-started/bootstrap",children:"bootstrap guide"}),"."]})]})}function c(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},7227:(e,s,n)=>{n.d(s,{A:()=>r});n(6540);var t=n(4164);const i={tabItem:"tabItem_Ymn6"};var a=n(4848);function r(e){let{children:s,hidden:n,className:r}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,t.A)(i.tabItem,r),hidden:n,children:s})}},9489:(e,s,n)=>{n.d(s,{A:()=>w});var t=n(6540),i=n(4164),a=n(4245),r=n(6347),o=n(6494),l=n(2814),c=n(5167),d=n(9900);function u(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:s,children:n}=e;return(0,t.useMemo)((()=>{const e=s??function(e){return u(e).map((e=>{let{props:{value:s,label:n,attributes:t,default:i}}=e;return{value:s,label:n,attributes:t,default:i}}))}(n);return function(e){const s=(0,c.XI)(e,((e,s)=>e.value===s.value));if(s.length>0)throw new Error(`Docusaurus error: Duplicate values "${s.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[s,n])}function b(e){let{value:s,tabValues:n}=e;return n.some((e=>e.value===s))}function p(e){let{queryString:s=!1,groupId:n}=e;const i=(0,r.W6)(),a=function(e){let{queryString:s=!1,groupId:n}=e;if("string"==typeof s)return s;if(!1===s)return null;if(!0===s&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:s,groupId:n});return[(0,l.aZ)(a),(0,t.useCallback)((e=>{if(!a)return;const s=new URLSearchParams(i.location.search);s.set(a,e),i.replace({...i.location,search:s.toString()})}),[a,i])]}function m(e){const{defaultValue:s,queryString:n=!1,groupId:i}=e,a=h(e),[r,l]=(0,t.useState)((()=>function(e){let{defaultValue:s,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(s){if(!b({value:s,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${s}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return s}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:s,tabValues:a}))),[c,u]=p({queryString:n,groupId:i}),[m,g]=function(e){let{groupId:s}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(s),[i,a]=(0,d.Dv)(n);return[i,(0,t.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:i}),f=(()=>{const e=c??m;return b({value:e,tabValues:a})?e:null})();(0,o.A)((()=>{f&&l(f)}),[f]);return{selectedValue:r,selectValue:(0,t.useCallback)((e=>{if(!b({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),g(e)}),[u,g,a]),tabValues:a}}var g=n(1062);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=n(4848);function j(e){let{className:s,block:n,selectedValue:t,selectValue:r,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),d=e=>{const s=e.currentTarget,n=l.indexOf(s),i=o[n].value;i!==t&&(c(s),r(i))},u=e=>{let s=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;s=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;s=l[n]??l[l.length-1];break}}s?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},s),children:o.map((e=>{let{value:s,label:n,attributes:a}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:t===s?0:-1,"aria-selected":t===s,ref:e=>l.push(e),onKeyDown:u,onClick:d,...a,className:(0,i.A)("tabs__item",f.tabItem,a?.className,{"tabs__item--active":t===s}),children:n??s},s)}))})}function v(e){let{lazy:s,children:n,selectedValue:a}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(s){const e=r.find((e=>e.props.value===a));return e?(0,t.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:r.map(((e,s)=>(0,t.cloneElement)(e,{key:s,hidden:e.props.value!==a})))})}function y(e){const s=m(e);return(0,x.jsxs)("div",{className:(0,i.A)("tabs-container",f.tabList),children:[(0,x.jsx)(j,{...s,...e}),(0,x.jsx)(v,{...s,...e})]})}function w(e){const s=(0,g.A)();return(0,x.jsx)(y,{...e,children:u(e.children)},String(s))}},1852:(e,s,n)=>{n.d(s,{Ay:()=>o,t2:()=>l});var t=n(6540),i=n(2171),a=n(7710),r=n(4848);function o(e){let{category:s,categoryId:n}=e;const{colorMode:o}=(0,a.G)(),l=e=>{if("https://giscus.app"!==e.origin)return;if("object"!=typeof e.data||!e.data.giscus)return;const s=e.data.giscus;if(s.discussion&&s.viewer){const e=s.viewer.login;if(e.includes("giscus")&&e.includes("bot"))return;const n=s.viewer.url;window.posthog&&window.posthog.setPersonProperties({github_url:n})}};return(0,t.useEffect)((()=>(window.addEventListener("message",l),()=>{window.removeEventListener("message",l)})),[]),(0,r.jsx)(i.A,{repo:"glasskube/glasskube",repoId:"R_kgDOLDumDw",category:s,categoryId:n,mapping:"title",strict:"0",reactionsEnabled:"1",emitMetadata:"1",inputPosition:"top",theme:o,lang:"en",loading:"lazy"})}function l(){return(0,r.jsx)(o,{category:"Blog",categoryId:"DIC_kwDOLDumD84CfCte"})}},4401:(e,s,n)=>{n.d(s,{A:()=>a});n(6540);var t=n(72),i=n(4848);const a=e=>{let{href:s,...n}=e;return(0,i.jsx)(t.A,{href:s,"data-color-scheme":"no-preference: light; light: light; dark: light;","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":`Star ${s} on GitHub`,...n,children:"Star"})}}}]);