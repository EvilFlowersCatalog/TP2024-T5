"use strict";(self.webpackChunkglasskube_docs=self.webpackChunkglasskube_docs||[]).push([[3396],{68964:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>u});var s=t(74848),i=t(28453),a=t(24401),l=t(51852);const o={title:"The guide to kubectl I never had.",slug:"kubectl",description:"A deep dive into the tips and tricks, plugins and tool that make kubectl such a versatile CLI tool for Kubernetes",authors:["jpage"],tags:["kubectl"]},r=void 0,c={id:"kubectl-guide",title:"The guide to kubectl I never had.",description:"A deep dive into the tips and tricks, plugins and tool that make kubectl such a versatile CLI tool for Kubernetes",source:"@site/guides/04_kubectl-guide.mdx",sourceDirName:".",slug:"/kubectl",permalink:"/TP2024-T5/guides/kubectl",draft:!1,unlisted:!1,tags:[{inline:!0,label:"kubectl",permalink:"/TP2024-T5/guides/tags/kubectl"}],version:"current",lastUpdatedBy:"RobertPrikryl",lastUpdatedAt:1728147151e3,sidebarPosition:4,frontMatter:{title:"The guide to kubectl I never had.",slug:"kubectl",description:"A deep dive into the tips and tricks, plugins and tool that make kubectl such a versatile CLI tool for Kubernetes",authors:["jpage"],tags:["kubectl"]},sidebar:"guides",previous:{title:"The guide to Git I never had.",permalink:"/TP2024-T5/guides/git"},next:{title:"How to add a Package to Glasskube",permalink:"/TP2024-T5/guides/how-to-add-a-package"}},d={},u=[{value:"Disclaimer \ud83d\uded1",id:"disclaimer-",level:2},{value:"Just before we begin",id:"just-before-we-begin",level:2},{value:"Installation",id:"installation",level:2},{value:"Linux (Ubuntu/Debian)",id:"linux-ubuntudebian",level:3},{value:"MacOS using Homebrew",id:"macos-using-homebrew",level:3},{value:"Windows using Chocolatey",id:"windows-using-chocolatey",level:3},{value:"kubectl commands:",id:"kubectl-commands",level:2},{value:"The syntax",id:"the-syntax",level:2},{value:"Working imperatively",id:"working-imperatively",level:2},{value:"Useful flags:",id:"useful-flags",level:2},{value:"Old School vs. New School watching flags:",id:"old-school-vs-new-school-watching-flags",level:2},{value:"Working with Pods",id:"working-with-pods",level:2},{value:"Working with nodes",id:"working-with-nodes",level:2},{value:"Working with Deployments, DaemonSets and StatefulSets",id:"working-with-deployments-daemonsets-and-statefulsets",level:2},{value:"Working with jobs",id:"working-with-jobs",level:2},{value:"Working with secrets",id:"working-with-secrets",level:2},{value:"Shell completions",id:"shell-completions",level:2},{value:"Working declaratively",id:"working-declaratively",level:2},{value:"Create YAML files",id:"create-yaml-files",level:3},{value:"Apply YAML Files (client-side apply)",id:"apply-yaml-files-client-side-apply",level:3},{value:"Server-Side Apply (SSA)",id:"server-side-apply-ssa",level:3},{value:"Plugins and tooling \ud83e\uddf0",id:"plugins-and-tooling-",level:2},{value:"Krew the Kubernetes plugin manager",id:"krew-the-kubernetes-plugin-manager",level:3},{value:"Content and Namespace switching \ud83d\udd00",id:"content-and-namespace-switching-",level:3},{value:"Kubectx and Kubens",id:"kubectx-and-kubens",level:4},{value:"Visibility \ud83d\udd2d",id:"visibility-",level:3},{value:"k9s",id:"k9s",level:4},{value:"kubectl tree",id:"kubectl-tree",level:4},{value:"kubecolor",id:"kubecolor",level:4},{value:"Package management \ud83d\udce6",id:"package-management-",level:3},{value:"Glasskube:",id:"glasskube",level:4},{value:"Networking \ud83c\udf10",id:"networking-",level:3},{value:"Kubectl-Cilium:",id:"kubectl-cilium",level:4},{value:"cert-manager:",id:"cert-manager",level:4},{value:"RBAC \ud83e\udef7",id:"rbac-",level:3},{value:"Kubelogin",id:"kubelogin",level:4},{value:"Kube-policy-advisor:",id:"kube-policy-advisor",level:4},{value:"Linting \ud83d\udccb",id:"linting-",level:3},{value:"Kubectl-neat:",id:"kubectl-neat",level:4},{value:"KubeLinter:",id:"kubelinter",level:4},{value:"Cluster maintenance and Security \ud83d\udee1\ufe0f",id:"cluster-maintenance-and-security-\ufe0f",level:3},{value:"KubePug",id:"kubepug",level:4},{value:"Kubescape:",id:"kubescape",level:4},{value:"Troubleshooting \ud83e\uddd1\u200d\ud83d\udd27",id:"troubleshooting-",level:3},{value:"Inspektor-Gadget:",id:"inspektor-gadget",level:4},{value:"K8s-gpt:",id:"k8s-gpt",level:4},{value:"Logging \ud83e\udeb5",id:"logging-",level:3},{value:"Stern:",id:"stern",level:4},{value:"Aliases \ud83d\udcc7",id:"aliases-",level:2},{value:"Kubectl Cheatsheet",id:"kubectl-cheatsheet",level:2},{value:"Additional resources:",id:"additional-resources",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/11729636-7337-4504-a62e-b1da495f9a19",alt:"kubectl thumbnail"})}),"\n",(0,s.jsxs)(n.p,{children:["What ",(0,s.jsx)(n.strong,{children:"kind of engineer are you"}),"? \ud83e\udd14\nCan somebody guess by just looking at you?\nMore than likely not."]}),"\n",(0,s.jsx)(n.p,{children:"Would that somebody be able to tell by looking at your keyboard instead?\nMight be a bit easier now. \u2328\ufe0f"}),"\n",(0,s.jsxs)(n.p,{children:["You know you are dealing with a ",(0,s.jsx)(n.strong,{children:"Kubernetes engineer"})," when the \u201ck\u201c key on their keyboard has seen better days.\nAt the ",(0,s.jsx)(n.a,{href:"https://github.com/glasskube/glasskube",children:"Glasskube"})," office, you will find spare ",(0,s.jsx)(n.strong,{children:"\u201ck\u201c"})," keys all over the place, just in case \ud83d\ude04"]}),"\n",(0,s.jsxs)(n.p,{children:["I\u2019m joking of course.\nI\u2019m not really sure about what a faded keyboard says about its owner. What I do know for sure is how important ",(0,s.jsx)(n.code,{children:"kubectl"})," is to anybody who wants to be a proficient ",(0,s.jsx)(n.a,{href:"https://kubernetes.io/",children:"Kubernetes"})," administrator."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"kubectl"})," is the CLI tool used to communicate to the Kubernetes API it can seem simple at first but can quickly get complicated.\nSo in this blog post, I aim to write ",(0,s.jsx)(n.strong,{children:"the guide I wish I had when I started"}),". Focusing first on command syntax and useful commands, before moving on to the vibrant ecosystem of ",(0,s.jsx)(n.a,{href:"https://krew.sigs.k8s.io/plugins/",children:"plugins"})," and tools built to expand the functionalities of ",(0,s.jsx)(n.code,{children:"kubectl"})," and Kubernetes.\nSharing tips and tricks along the way as well as a helpful ",(0,s.jsx)(n.code,{children:"kubecltl cheatsheet"})," at the end. \ud83d\udccb"]}),"\n",(0,s.jsx)(n.p,{children:"Let\u2019s get to it. \u2638\ufe0f"}),"\n",(0,s.jsx)(n.h2,{id:"disclaimer-",children:"Disclaimer \ud83d\uded1"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["This isn\u2019t an article about Kubernetes. K8s is an incredibly vast technology, encompassing numerous concepts, such as various types of Kubernetes objects and their interactions. For this discussion, I'll assume you're familiar with these concepts. Instead, I'll focus specifically on ",(0,s.jsx)(n.code,{children:"kubectl"}),", its usage, and the tools built around it."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"just-before-we-begin",children:"Just before we begin"}),"\n",(0,s.jsx)(n.p,{children:"If you are a fan of supporting Open Source projects working to make Kubernetes package management better for everyone then please consider supporting Glasskube, by giving us a Star on GitHub \ud83d\ude4f"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/glasskube/glasskube",children:(0,s.jsx)(n.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/05a03edf-7d6a-48fd-9b24-598abcfd1e9a",alt:"Screenshot 2024-04-26 at 10 54 54"})})}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsxs)(n.p,{children:["To install ",(0,s.jsx)(n.code,{children:"kubectl"}),", you have a few different options depending on your operating system. Here's how to install it on some common platforms:"]}),"\n",(0,s.jsx)(n.h3,{id:"linux-ubuntudebian",children:"Linux (Ubuntu/Debian)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sudo apt-get update && sudo apt-get install -y kubectl\n"})}),"\n",(0,s.jsx)(n.h3,{id:"macos-using-homebrew",children:"MacOS using Homebrew"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"brew install kubectl\n"})}),"\n",(0,s.jsx)(n.h3,{id:"windows-using-chocolatey",children:"Windows using Chocolatey"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"choco install kubernetes-cli\n"})}),"\n",(0,s.jsx)(n.p,{children:"After installation, you can verify if kubectl has been installed correctly by running:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl version --client\n"})}),"\n",(0,s.jsx)(n.h2,{id:"kubectl-commands",children:"kubectl commands:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"kubectl"})," is a Command Line Interface (CLI) tool used to communicate with the Kubernetes API. There are many commands, too many to remember."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/j94hbqfxgqd8g669b7x1.png",alt:"k8s hard gif"})}),"\n",(0,s.jsx)(n.p,{children:"Don\u2019t worry though it\u2019s not as daunting as some might want you to think."}),"\n",(0,s.jsx)(n.p,{children:"We will explore ways to quickly access command references, k8s-object-specific commands, helpful aliases, and command completion. But first, how are command strings built?"}),"\n",(0,s.jsx)(n.h2,{id:"the-syntax",children:"The syntax"}),"\n",(0,s.jsxs)(n.p,{children:["English and Chinese are ",(0,s.jsx)(n.code,{children:"subject-verb-object (SVO)"})," languages."]}),"\n",(0,s.jsxs)(n.p,{children:["Hindi and Korean are ",(0,s.jsx)(n.code,{children:"subject-object-verb (SOV)"})," languages."]}),"\n",(0,s.jsxs)(n.p,{children:["If kubectl were a language, it would be a ",(0,s.jsx)(n.code,{children:"kubectl + verb + object/[name optional] + flag"})," (kvof) language \ud83d\ude04"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://github.com/glasskube/glasskube/assets/3041752/ebb44c40-d2c4-4889-9776-a7a803f6061c",alt:"kubectl syntax"})}),"\n",(0,s.jsx)(n.p,{children:"Also similar to languages, the best way to learn and absorb grammar is by using it in context and not memorizing long verb and object lists."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u2139\ufe0f If you are stuck and want to quickly reference the existing Kubernetes objects in any Kubernetes version run ",(0,s.jsx)(n.code,{children:"kubectl api-resources"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Commands are built by choosing that ",(0,s.jsx)(n.code,{children:"action [verb]"})," you want to apply to the desired Kubernetes ",(0,s.jsx)(n.code,{children:"resource [object]"})," usually followed by the name of the resource additionally you have a large array of ",(0,s.jsx)(n.code,{children:"filters [flags]"})," that can be applied to the command which will determine the final scope and output."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://github.com/glasskube/glasskube/assets/3041752/5d9d417a-2012-44d5-99b9-fdf6e0331785",alt:"kubectl command building"})}),"\n",(0,s.jsxs)(n.p,{children:["Let\u2019s look at a simple example of command building using the commonly used ",(0,s.jsx)(n.code,{children:"get"})," verb to retrieve all resources in the ",(0,s.jsx)(n.code,{children:"glasskube-system"})," namespace, and the output is in ",(0,s.jsx)(n.code,{children:"yaml"})," format:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl get all --namespace glasskube-system -o yaml\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u2139\ufe0f If you come across a Kubernetes resource that you haven\u2019t heard of before or need a refresher use ",(0,s.jsx)(n.code,{children:"kubectl explain [resource-name]"})," to get an in-terminal description and usage instructions."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"working-imperatively",children:"Working imperatively"}),"\n",(0,s.jsx)(n.p,{children:"When working in Kubernetes environments your tasks are many, anything from deploying new apps, troubleshooting faulty resources, inspecting usage, and much more. Later on, we will explore how useful declarative ways of working are more appropriate for defining and deploying workloads, but for everything else we have our arsenal of useful imperative Kubernetes commands at the ready."}),"\n",(0,s.jsx)(n.p,{children:"Simple commands to get us started are:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'# Create a new deployment named "nginx-deployment" with the nginx image\nkubectl run nginx-deployment --image=nginx\n\n# Delete a pod named "nginx-deployment" in the default namespace\nkubectl delete pod nginx-deployment\n'})}),"\n",(0,s.jsxs)(n.p,{children:["To take imperative commands to the next step know that you can modify resources by using the ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Text-based_user_interface#:~:text=In%20computing%2C%20text%2Dbased%20user,before%20the%20advent%20of%20bitmapped",children:"TUI"})," editor:\nBy running ",(0,s.jsx)(n.code,{children:"kubectl edit -n [namespace] [resource-name]"})," a text editor like the one below will open. Make you edits and close the editor just like in ",(0,s.jsx)(n.a,{href:"https://www.vim.org/",children:"vim"})," by running ",(0,s.jsx)(n.code,{children:"ESC + :q!"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'# Please edit the object below. Lines beginning with a \'#\' will be ignored,\n# and an empty file will abort the edit. If an error occurs while saving this file will be\n# reopened with the relevant failures.\n#\napiVersion: v1\nkind: Pod\nmetadata:\n  annotations:\n    kubectl.kubernetes.io/default-container: manager\n  creationTimestamp: "2024-04-22T17:07:39Z"\n  generateName: glasskube-controller-manager-556ff6fccf-\n  labels:\n    control-plane: controller-manager\n    pod-template-hash: 556ff6fccf\n  name: glasskube-controller-manager-556ff6fccf-4qlxz\n  namespace: glasskube-system\n  ownerReferences:\n  - apiVersion: apps/v1\n    blockOwnerDeletion: true\n    controller: true\n    kind: ReplicaSet\n    name: glasskube-controller-manager-556ff6fccf\n    uid: 430e90e9-32f3-45f6-92dc-4bae26ae1654\n"/var/folders/2q/wjmbwg1n5vn8v7vlw17nsz0h0000gn/T/kubectl-edit-1306753911.yaml" 209L, 5898B\n'})}),"\n",(0,s.jsx)(n.p,{children:"Most commands are applicable to all sorts of Kubernetes objects. Insofar as it is useful further down we will touch on specific commands that are useful for certain Kubernetes resources. Before that though, it\u2019s worth learning about some useful flags that can be applied to many different objects."}),"\n",(0,s.jsx)(n.h2,{id:"useful-flags",children:"Useful flags:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"--env:"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"--env"})," flag allows you to specify environment variables for the container being created."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'kubectl run nginx-deployment --image=nginx --env="ENV_VARIABLE=value"\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"--template:"}),"\nThis flag allows you to specify a Go template for the output format of your kubectl command. It's handy when you want to customize the output structure, filtering, or presentation."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl get pods --template='{{range .items}}{{.metadata.name}}{{\"\\n\"}}{{end}}'\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"--dry-run=[client/server]:"}),"\nMassively useful when you want render a manifest for an object you don't remember how to write from scratch or have a template at hand. The ",(0,s.jsx)(n.code,{children:"--dry-run"})," flag prints the object manifest that would be sent without sending it. Use the ",(0,s.jsx)(n.code,{children:"server"})," option to see the server side request that would be generated."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl create secret generic github-api-token --from-literal token=$GITHUB_TOKEN --dry-run=client -o yaml\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Concatenating the command with other tools can be very useful too.\nTaking the example above, you can pipe the output of the generated manifest and pass in into a third party secret manager like ",(0,s.jsx)(n.a,{href:"https://github.com/bitnami-labs/sealed-secrets",children:"Sealed-secrets"})," to create a kubeseal secret manifest."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl create secret generic github-api-token --from-literal token=$GITHUB_TOKEN --dry-run=client -o yaml | kubeseal --format yaml > api-token-secret.sealed.yaml\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"--field-selector:"}),"\nWith this flag, you can filter resources based on specific fields. For instance, you can filter pods based on their status or labels."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl get pods --field-selector=status.phase=Running\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"--field-selector type=[Normal/Warning]:"}),"\nThis is a specific use of the --field-selector flag, where you filter events based on their type, either Normal or Warning."]}),"\n",(0,s.jsx)(n.p,{children:"**kubectl events -n [resource-namespace] --for=[resource-kind]/[resource-name]: **\nThis command fetches events related to a specific resource in the specified namespace. It continuously watches for new events related to the given resource."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl events -n my-namespace --for=deployment/my-deployment\n"})}),"\n",(0,s.jsx)(n.h2,{id:"old-school-vs-new-school-watching-flags",children:"Old School vs. New School watching flags:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"watch vs. -w"}),":"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"watch"}),": This is a traditional Unix command used to execute a specified command repeatedly at regular intervals, displaying its output in the terminal. Unlike the -w flag in kubectl, the watch command does not automatically update the terminal output when changes occur."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"-w"}),": This is a modern flag in kubectl that enables continuous watching for changes to resources."]}),"\n",(0,s.jsx)(n.h2,{id:"working-with-pods",children:"Working with Pods"}),"\n",(0,s.jsx)(n.p,{children:"Pods are the smallest abstraction inside the Kubernetes ecosystem, they are the logical units that house your containers. Pods consume resources and can be executed into and produce logs. Here are some commands that will help you manage pods."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Show resource usage of a pod\nkubectl top pod -n [namespace] [pod-name]\n\n# Run a command inside a new pod in the cluster\nkubectl run -it ubuntu --image ubuntu --rm -- bash\n\n# Show resource labels as columns\n# e.g. kubectl get pods -n [namespace] -L vault-active -L vault-sealed\nkubectl get pods -n [namespace] -L vault-active -L vault-sealed\n\n# Execute a command inside a pod\nkubectl exec -it [pod-name] -n [namespace] --\n\n# Port forward to a pod\nkubectl port-forward [pod-name] [local-port]:[remote-port] -n [namespace]\n\n# Show container logs\nkubectl logs -n [namespace] [pod-name]\nkubectl logs -n [namespace] /deployment/[deployment-name]  # Use -f flag for continuous streaming\n\n# Run a command inside an existing container\nkubectl exec -it -n [namespace] [pod-name] -- [command...]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"working-with-nodes",children:"Working with nodes"}),"\n",(0,s.jsx)(n.p,{children:"Nodes are the underlying instances that provide computational power and storage on top of which your Kubernetes cluster runs."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Show node resource utilization\nkubectl top node [node-name]  # Node name is optional; without shows table of all nodes\n\n# Get node information\nkubectl get node\n"})}),"\n",(0,s.jsx)(n.h2,{id:"working-with-deployments-daemonsets-and-statefulsets",children:"Working with Deployments, DaemonSets and StatefulSets"}),"\n",(0,s.jsx)(n.p,{children:"Deployments, DaemonSets, and StatefulSets are higher-level abstractions in Kubernetes that manage the deployment and scaling of application workloads."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Restart a workload (e.g. deployment, stateful set, daemon set)\nkubectl rollout restart -n [namespace] [workload-kind]/[workload-name]  # Triggers a re-creation of all pods for this workload, adhering to the workload configuration\n\n# Check the status of a deployment rollout\nkubectl rollout status deployment/[name]\n\n# View rollout history of a deployment\nkubectl rollout history deployment/[name]  # View rollout history of a deployment\n\n# Scale a deployment to the specified number of replicas\nkubectl scale deployment/ --replicas=[number]  # Scale a deployment to the specified number of replicas\n\n# Watch events related to a deployment\nkubectl events -n glasskube-system --for=deployment/glasskube-controller-manager\n\n#Update Deployment Image\nkubectl set image deployment/[deployment-name] [container-name]=new-image:tag\n\n# Delete DaemonSet\nkubectl delete daemonset [daemonset-name]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"working-with-jobs",children:"Working with jobs"}),"\n",(0,s.jsx)(n.p,{children:"Jobs manage the execution of pods to perform a particular task and ensure the task is completed successfully before terminating."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Run a CronJob manually\nkubectl create job [job-name] --image=image/name\n\n# Creates a new job from the job template specified in the cronjob\nkubectl create job -n [namespace] --from=cronjob/[cron-job-name] [job-name]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"working-with-secrets",children:"Working with secrets"}),"\n",(0,s.jsx)(n.p,{children:"Secrets are used to store sensitive information like passwords, OAuth tokens, and SSH keys securely in Kubernetes."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Create Secret\nkubectl create secret generic [secret-name] --from-literal=key1=value1 --from-file=ssh-privatekey=~/.ssh/id_rsa\n\n# Get a value from a secret\nkubectl get secrets -n [namespace] [secret-name] --template='{{ .data.[key-name] | base64decode }}'\n\n# Get a value from a secret using jsonpath\nkubectl get secrets [secret-name] -o jsonpath=\"{.data.key1}\" | base64 --decode\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u2139\ufe0f JSONPath is a query language used to extract specific data from JSON documents. In Kubernetes, JSONPath expressions are often used with the -o jsonpath flag in kubectl commands to extract specific information from the output of those commands."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"shell-completions",children:"Shell completions"}),"\n",(0,s.jsxs)(n.p,{children:["As you have probably noticed, ",(0,s.jsx)(n.code,{children:"kubectl"})," commands can get long in no time. A really nifty shell completion script can be added to your ",(0,s.jsx)(n.code,{children:"bash"})," or ",(0,s.jsx)(n.code,{children:"zshell"})," file to enable easy tab completions. No more memorizing.\nTo do so in all your shell sessions, add the following to your ",(0,s.jsx)(n.code,{children:"~/.zshrc"})," file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"source <(kubectl completion zsh)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["And restart the shell.\nFollow the instructions here if you are using ",(0,s.jsx)(n.code,{children:"bash"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'# Install bash-completion package\nsudo apt-get install -y bash-completion\n# Store the output of the completion command in .bashrc\necho "source <(kubectl completion bash)" >> ~/.bashrc\n# Activate the completion rules\nsource ~/.bashrc\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/x9l2ieqliyxp7d7g3575.gif",alt:"kubectl autocomplete"})}),"\n",(0,s.jsx)(n.h2,{id:"working-declaratively",children:"Working declaratively"}),"\n",(0,s.jsx)(n.p,{children:"Declarative management of Kubernetes resources involves specifying the desired state of your resources using YAML manifest files and applying those manifests to the cluster."}),"\n",(0,s.jsx)(n.h3,{id:"create-yaml-files",children:"Create YAML files"}),"\n",(0,s.jsx)(n.p,{children:"All Kubernetes objects are defined in YAML files, regardless if you write them yourself or not, YAML file definitions are how the Kubernetes API knows what the state of the cluster should be:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: glasskube-deployment\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: glasskube\n      env: prod\n  template:\n    metadata:\n      labels:\n        app: glasskube\n        env: prod\n    spec:\n      containers:\n      - name: glasskube-container\n        image: your-glasskube-image:latest\n"})}),"\n",(0,s.jsxs)(n.p,{children:["To create this deployment from scratch use the ",(0,s.jsx)(n.code,{children:"kubectl create"})," command:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl create -f glasskube-deployment.yaml\n"})}),"\n",(0,s.jsx)(n.h3,{id:"apply-yaml-files-client-side-apply",children:"Apply YAML Files (client-side apply)"}),"\n",(0,s.jsx)(n.p,{children:"Applying YAML files is the standard method for managing Kubernetes resources. You define the desired state of your resources in YAML format and apply those YAML files to the cluster."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:" kubectl apply -f manifest.yaml\n"})}),"\n",(0,s.jsx)(n.h3,{id:"server-side-apply-ssa",children:"Server-Side Apply (SSA)"}),"\n",(0,s.jsx)(n.p,{children:"Server-Side Apply is a newer approach to applying configuration changes to Kubernetes resources. With SSA, changes are applied directly on the server side, meaning that the Kubernetes API server takes responsibility for ensuring that the desired state is achieved."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl apply --server-side -f manifest.yaml\n"})}),"\n",(0,s.jsx)(n.h2,{id:"plugins-and-tooling-",children:"Plugins and tooling \ud83e\uddf0"}),"\n",(0,s.jsxs)(n.p,{children:["Whenever I see some back and forth around what Kubernetes is and isn\u2019t. What use cases it\u2019s best suited for and how should it best be thought of, the same ",(0,s.jsx)(n.a,{href:"https://twitter.com/kelseyhightower/status/935252923721793536?lang=en",children:"Kelsey Hightower"})," tweet pops into my head."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/lpzdruwnpv86nmmj9n8x.png",alt:"Kelsey Hightower tweet"})}),"\n",(0,s.jsx)(n.p,{children:"The sentiment is widely agreed upon, as evidenced by the extensive ecosystem of Kubernetes plugins and tools designed to assist in various stages of the Kubernetes lifecycle."}),"\n",(0,s.jsx)(n.h3,{id:"krew-the-kubernetes-plugin-manager",children:"Krew the Kubernetes plugin manager"}),"\n",(0,s.jsxs)(n.p,{children:["A great plugin manager to find new plugins is ",(0,s.jsx)(n.a,{href:"https://krew.sigs.k8s.io/docs/user-guide/setup/install/",children:"krew"}),", install is here."]}),"\n",(0,s.jsxs)(n.p,{children:["Command to install ",(0,s.jsx)(n.code,{children:"kubectl"})," plugins via Krew:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl krew install <PLUGIN_NAME>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Let\u2019s explore some of the main plguing and tooling categories and highlight some of the most useful projects out there. Since there are so many worth bringing attention to, I will add a section of ",(0,s.jsx)(n.code,{children:"Honorable mentions"})," to each section."]}),"\n",(0,s.jsx)(n.h3,{id:"content-and-namespace-switching-",children:"Content and Namespace switching \ud83d\udd00"}),"\n",(0,s.jsx)(n.p,{children:"In Kubernetes environments, you consistently operate within 2  hierarchical contexts the clusters and the namespaces. Ensuring accurate command execution requires specifying the appropriate context to obtain the desired output. Switching cluster contexts or namespaces can involve lengthy commands to remember, which is where tools like Kubectl and Kubens come in."}),"\n",(0,s.jsx)(n.h4,{id:"kubectx-and-kubens",children:"Kubectx and Kubens"}),"\n",(0,s.jsxs)(n.p,{children:["Easily see the available clusters and namespaces and swith between them effortlessly.\nInstallation instructions ",(0,s.jsx)(n.a,{href:"https://github.com/ahmetb/kubectx",children:"here"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/jbj2i5ay7w1ibgq3euwy.gif",alt:"Kubectx screenshare"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Honorable mentions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/surfinggo/kubectl-cf",children:"kubectl-cf"}),": A faster way to switch between kubeconfig files (not contexts)."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"visibility-",children:"Visibility \ud83d\udd2d"}),"\n",(0,s.jsx)(n.p,{children:"Kubernetes clusters are complex systems, with many moving parts that depend on each other so that your apps run. To have clear visibility into what is happening at all times is crucial."}),"\n",(0,s.jsx)(n.h4,{id:"k9s",children:"k9s"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://k9scli.io/",children:"K9s"})," is a handy and low-weight interactive Kubernetes dashboard that runs right in the terminal. As well as visualizing your k8s resources, you can also easily execute into pods, edit manifest, and manage your workloads all in one place. It is probably one of my favorite tools for Kubernetes management"]}),"\n",(0,s.jsxs)(n.p,{children:["Install is ",(0,s.jsx)(n.a,{href:"https://k9scli.io/topics/install/",children:"here."})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/njtibnqfg83vsats8e3s.gif",alt:"k9s-gif"})}),"\n",(0,s.jsx)(n.h4,{id:"kubectl-tree",children:"kubectl tree"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.code,{children:"kubectl"})," plugin to explore ownership relationships between Kubernetes objects through ",(0,s.jsx)(n.code,{children:"ownersReferences"})," on the objects."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/jmjhurlsn2vlbwbbjwk4.png",alt:"kubectl tree"}),"\nInstall:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl krew install tree\nkubectl tree --help\n"})}),"\n",(0,s.jsx)(n.h4,{id:"kubecolor",children:"kubecolor"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/kubecolor/kubecolor",children:"KubeColor"})," is used to add colors to your ",(0,s.jsx)(n.code,{children:"kubectl"})," output."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qnqqg7x3hxxrqnwscrkl.png",alt:"Kubecolor"}),"\nInstallations instructions ",(0,s.jsx)(n.a,{href:"https://github.com/kubecolor/kubecolor?tab=readme-ov-file#installation",children:"here."})]}),"\n",(0,s.jsx)(n.h3,{id:"package-management-",children:"Package management \ud83d\udce6"}),"\n",(0,s.jsx)(n.p,{children:"Cluster package management with conventional package management tools can be a pain in the neck, and updating packages is a hassle. Configuration is clunky and applying your desired package stack declaratively has been still out of reach, until now."}),"\n",(0,s.jsx)(n.h4,{id:"glasskube",children:"Glasskube:"}),"\n",(0,s.jsxs)(n.p,{children:["With ",(0,s.jsx)(n.a,{href:"https://github.com/glasskube/glasskube",children:"Glasskube"})," all the pain points found in conventional package managers like helm are solved to ensure you have time to manage your workloads and not have to worry about managing your k8s package stack."]}),"\n",(0,s.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube-nocookie.com/embed/ONNUP7l7WJM?si=y3tJVPcbyn6O7epl",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),"\n",(0,s.jsx)(n.h3,{id:"networking-",children:"Networking \ud83c\udf10"}),"\n",(0,s.jsx)(n.h4,{id:"kubectl-cilium",children:"Kubectl-Cilium:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/bmcustodio/kubectl-cilium",children:"kubectl-Cilium"})," is a plugin that interacts with Cilum which is an eBPF-based, cloud-native solution for providing, securing, and observing network connectivity between workloads."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/251mnpv708jj8jemx1iw.png",alt:"Cilium"})}),"\n",(0,s.jsx)(n.p,{children:"Install:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl krew install cilium\n"})}),"\n",(0,s.jsx)(n.h4,{id:"cert-manager",children:"cert-manager:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/cert-manager/cert-manager",children:"cert-manager"})," adds certificates and certificate issuers as resource types in Kubernetes clusters, simplifying obtaining, renewing, and using those certificates."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/q67bciwayb5j88bhmc80.png",alt:"cert-manager"})}),"\n",(0,s.jsxs)(n.p,{children:["Installation instructions ",(0,s.jsx)(n.a,{href:"https://cert-manager.io/docs/installation/",children:"here"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Honorable mentions:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/eldadru/ksniff",children:"Ksniff"}),":  A ",(0,s.jsx)(n.code,{children:"kubectl"})," plugin that utilizes ",(0,s.jsx)(n.code,{children:"tcpdump"})," and Wireshark to start a remote capture on any pod in your Kubernetes cluster."]}),"\n",(0,s.jsx)(n.h3,{id:"rbac-",children:"RBAC \ud83e\udef7"}),"\n",(0,s.jsx)(n.h4,{id:"kubelogin",children:"Kubelogin"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/int128/kubelogin",children:"Kubelogin"})," is a plugin for ",(0,s.jsx)(n.code,{children:"Kubernetes OpenID Connect (OIDC) authentication"}),", also known as ",(0,s.jsx)(n.code,{children:"kubectl oidc-login"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Installation instructions ",(0,s.jsx)(n.a,{href:"https://github.com/Azure/kubelogin?tab=readme-ov-file#installation",children:"here"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"kube-policy-advisor",children:"Kube-policy-advisor:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/sysdiglabs/kube-policy-advisor",children:"Kube-policy-advisor"})," makes it easier to create K8s Pod Security Policies (PSPs) or OPA Policy from either a live K8s environment or from a single .yaml file containing a pod specification (Deployment, DaemonSet, Pod, etc).\nInstall:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl krew install advise-policy\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Honorable mentions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/aquasecurity/kubectl-who-can",children:"kubectl-who-can"}),": Shows which subjects have RBAC permissions to VERB [TYPE | TYPE/NAME | NONRESOURCEURL] in Kubernetes."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/corneliusweig/rakkess",children:"rakkess"}),": Review Access - kubectl plugin to show an access matrix for server resources"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/Ladicle/kubectl-rolesum",children:"kubectl-rolesum"}),": Summarize RBAC roles for the specified subject (ServiceAccount, User and Group)."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"linting-",children:"Linting \ud83d\udccb"}),"\n",(0,s.jsx)(n.h4,{id:"kubectl-neat",children:"Kubectl-neat:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/itaysk/kubectl-neat",children:"Kubectl-neat"})," removes clutter from Kubernetes manifests to make them more readable. It primarily looks for two types of things to ignore: default values inserted by Kubernetes' object model and common mutating controllers.\nInstall:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl krew install neat\n\n"})}),"\n",(0,s.jsx)(n.h4,{id:"kubelinter",children:"KubeLinter:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/stackrox/kube-linter",children:"KubeLinter"})," analyzes Kubernetes YAML files and Helm charts, and checks them against a variety of best practices, with a focus on production readiness and security."]}),"\n",(0,s.jsxs)(n.p,{children:["Installation instructions ",(0,s.jsx)(n.a,{href:"https://github.com/stackrox/kube-linter?tab=readme-ov-file#installing-kubelinter",children:"https://github.com/stackrox/kube-linter?tab=readme-ov-file#installing-kubelinter"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"cluster-maintenance-and-security-\ufe0f",children:"Cluster maintenance and Security \ud83d\udee1\ufe0f"}),"\n",(0,s.jsx)(n.h4,{id:"kubepug",children:"KubePug"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/kubepug/kubepug",children:"KubePug"})," downloads a generated ",(0,s.jsx)(n.code,{children:"data.json"})," file containing API deprecation information for a specified release of Kubernetes, scans a running Kubernetes cluster to determine if any objects will be affected by deprecation and displays affected objects to the user.\nExample:\nYou can check the status of a running cluster with the following command."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$ kubepug --k8s-version=v1.22 # Will verify the current context against v1.22 version\n[...]\nRESULTS:\nDeprecated APIs:\nPodSecurityPolicy found in policy/v1beta1\n\t \u251c\u2500 Deprecated at: 1.21\n\t \u251c\u2500 PodSecurityPolicy governs the ability to make requests that affect the Security Context that will be applied to a pod and container.Deprecated in 1.21.\n\t\t-> OBJECT: restrictive namespace: default\n\nDeleted APIs:\n\t APIs REMOVED FROM THE CURRENT VERSION AND SHOULD BE MIGRATED IMMEDIATELY!!\nIngress found in extensions/v1beta1\n\t \u251c\u2500 Deleted at: 1.22\n\t \u251c\u2500 Replacement: networking.k8s.io/v1/Ingress\n\t \u251c\u2500 Ingress is a collection of rules that allow inbound connections to reach the endpoints defined by a backend. An Ingress can be configured to give servicesexternally-reachable urls, load balance traffic, terminate SSL, offer namebased virtual hosting etc.DEPRECATED - This group version of Ingress is deprecated by networking.k8s.io/v1beta1 Ingress. See the release notes for more information.\n\t\t-> OBJECT: bla namespace: blabla\n"})}),"\n",(0,s.jsx)(n.p,{children:"Install:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl krew install deprecations\n"})}),"\n",(0,s.jsx)(n.h4,{id:"kubescape",children:"Kubescape:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/kubescape/kubescape/",children:"Kubescape"})," is an open-source Kubernetes security platform for your clusters, CI/CD pipelines, and IDE that separates out the security signal from the scanner noise."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2mmc28za1p641ehr2ruh.gif",alt:"kubescape-screen"})}),"\n",(0,s.jsxs)(n.p,{children:["Installation instructions ",(0,s.jsx)(n.a,{href:"https://github.com/kubescape/kubescape/blob/master/docs/installation.md",children:"here"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Honorable mentions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/imuxin/kubectl-watch",children:"kubectl-watch"}),": Another watch tool with visualization view of delta change for kubernetes resources."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"troubleshooting-",children:"Troubleshooting \ud83e\uddd1\u200d\ud83d\udd27"}),"\n",(0,s.jsx)(n.h4,{id:"inspektor-gadget",children:"Inspektor-Gadget:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/inspektor-gadget/inspektor-gadget",children:"Inspektor-gadget"})," is a collection of tools (or gadgets) to debug and inspect Kubernetes resources and applications."]}),"\n",(0,s.jsx)(n.p,{children:"Inspektor Gadget tools are known as gadgets. You can deploy one, two, or many gadgets."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/m8jkvc1m5bmn6v7ksu2k.png",alt:"inspektor gadget"})}),"\n",(0,s.jsx)(n.h4,{id:"k8s-gpt",children:"K8s-gpt:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/k8sgpt-ai/k8sgpt",children:"k8sgpt"})," is a tool for scanning your Kubernetes clusters, diagnosing, and triaging issues in simple English."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/crnj90uvi0b6x1slitlo.gif",alt:"k8sgpt"})}),"\n",(0,s.jsxs)(n.p,{children:["Installation instructions ",(0,s.jsx)(n.a,{href:"https://github.com/k8sgpt-ai/k8sgpt?tab=readme-ov-file#cli-installation",children:"here"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Honorable mentions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/kvaps/kubectl-node-shell",children:"kubectl node-shell"})," : Starts a root shell directly in the node's host OS running."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"logging-",children:"Logging \ud83e\udeb5"}),"\n",(0,s.jsx)(n.h4,{id:"stern",children:"Stern:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/stern/stern",children:"Stern"})," allows you to ",(0,s.jsx)(n.code,{children:"tail"})," multiple pods on Kubernetes and multiple containers within the pod. Each result is color-coded for quicker debugging.\nInstall:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl krew install stern\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u2139\ufe0f Some security implications of using ",(0,s.jsx)(n.code,{children:"kubectl"})," plugins include possible Vulnerabilities, Privilege Escalation, and inadvertent Data Leakage. Make sure to only use actively maintained plugins and ideally have an active community around them."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"aliases-",children:"Aliases \ud83d\udcc7"}),"\n",(0,s.jsxs)(n.p,{children:["With so many ",(0,s.jsx)(n.code,{children:"kubectl"})," commands to remember, simplify your life by using keyboard shortcuts or aliases."]}),"\n",(0,s.jsxs)(n.p,{children:["Here you will find a ",(0,s.jsx)(n.a,{href:"https://github.com/ahmetb/kubectl-aliases",children:"repo"})," with contains ",(0,s.jsx)(n.a,{href:"https://github.com/ahmetb/kubectl-aliases/blob/master/generate_aliases.py",children:"a script"})," to generate hundreds of convenient shell aliases for ",(0,s.jsx)(n.code,{children:"kubectl"}),". The thing is that many of the aliases are long and might become hard to recall. Don\u2019t worry though I found this ",(0,s.jsx)(n.a,{href:"https://dev.to/zenika/kubernetes-a-pragmatic-kubectl-aliases-collection-17oc",children:"very pragmatic blog post by Benoit Couetil"})," on how to deal with the many aliases generated by the above script."]}),"\n",(0,s.jsx)(n.h2,{id:"kubectl-cheatsheet",children:"Kubectl Cheatsheet"}),"\n",(0,s.jsx)(n.p,{children:"No guide is complete without a cheatsheet now is it?"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Basic Commands\n\n# List API Resources\nkubectl api-resources\n\n# List Resources\nkubectl get [name]\n\n# Explain Resources\nkubectl explain\n\n# Working with Pods\n# Create a new deployment named \"nginx-deployment\" with the nginx image\nkubectl run nginx-deployment --image=nginx\n\n# Show Resource Usage of a Pod\nkubectl top pod -n [namespace] [pod-name]\n\n# Run Command in Pod\nkubectl run -it [pod-name] --image [image-name] --rm -- [command]\n\n# Show Resource Labels\nkubectl get pods -n [namespace] -L [label1] -L [label2]\n\n# Execute Command in Pod\nkubectl exec -it [pod-name] -- [command]\n\n# Port Forwarding\nkubectl port-forward [pod-name] [local-port]:[remote-port]\n\n# Filtering Pods by Node Name\nkubectl get pods --field-selector spec.nodeName=[node-name]\n\n# Filtering Pods by Phase\nkubectl get pods --field-selector status.phase=Running\n\n# Delete a pod named \"my-pod\" in the default namespace\nkubectl delete pod my-pod\n\n# Working with Nodes\n\n# Watch Nodes (Old School)\nwatch kubectl get nodes -o wide\n\n# Watch Nodes (New School)\nkubectl get nodes -w\n\n# Node Resource Utilization\nkubectl top node [node-name]\n\n# Get Node Resource\nkubectl describe node [node-name]\n\n# Working with Deployments, Daemonsets, and StatefulSets\n\n# Restart Workload\nkubectl rollout restart -n [namespace] [kind]/[name]\n\n# Rollout Status\nkubectl rollout status [kind]/[name]\n\n# Rollout History\nkubectl rollout history [kind]/[name]\n\n# Scale Deployment\nkubectl scale deployment/[name] --replicas=[replica-count]\n\n#Update Deployment Image\nkubectl set image deployment/[deployment-name] [container-name]=new-image:tag\n\n# Watch events related to a deployment\nkubectl events -n glasskube-system --for=deployment/glasskube-controller-manager\n\n# Delete DaemonSet\nkubectl delete daemonset [daemonset-name]\n\n# Working with Jobs\n\n# Run CronJob Manually\nkubectl create job -n [namespace] --from=cronjob/[cron-job-name] [job-name]\n\n# Working with Secrets\n\n# Get Value from Secret\nkubectl get secret -n [namespace] [secret-name] -o=jsonpath='{.data.[key]}' | base64 --decode\n\n# Create Secret\nkubectl create secret generic [secret-name] --from-literal=key1=value1 --from-file=ssh-privatekey=~/.ssh/id_rsa\n\n# Get a value from a secret\nkubectl get secrets -n [namespace] [secret-name] --template='{{ .data.[key-name] | base64decode }}'\n\n# Working with Containers\n\n# Show Container Logs\nkubectl logs -n [namespace] [pod-name]\nkubectl logs -n [namespace] deployment/[deployment-name]\n\n# Run Command in Container\nkubectl exec -it -n [namespace] [pod-name] -- [command]\n\n# Working Imperatively\n\n# Modify Resource\nkubectl edit -n [namespace] [resource-kind]/[resource-name]\n\n# Delete Resource\nkubectl delete [resource-kind]/[resource-name]\n\n# Create Resource\nkubectl create -f [resource-file]\n\n# Working Declaratively\n\n# Use Server-Side Apply (SSA)\nkubectl apply --server-side -f [resource-file]\n\n# Events and Logs\n\n# Show Events for Resource\nkubectl get events -n [namespace] --field-selector involvedObject.kind=[kind] --field-selector involvedObject.name=[name]\n\n# Filtering Events by Type\nkubectl get events --field-selector type=Warning\n\n# Filtering Events by Involved Object Name\nkubectl get events --field-selector involvedObject.name=[resource-name]\n\n# Show Resource Usage\nkubectl top\n"})}),"\n",(0,s.jsx)(n.h2,{id:"additional-resources",children:"Additional resources:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Curated list of plugins: ",(0,s.jsx)(n.a,{href:"https://github.com/ishantanu/awesome-kubectl-plugins",children:"https://github.com/ishantanu/awesome-kubectl-plugins"})]}),"\n",(0,s.jsxs)(n.li,{children:["List of aliases: ",(0,s.jsx)(n.a,{href:"https://github.com/ahmetb/kubectl-aliases",children:"https://github.com/ahmetb/kubectl-aliases"})]}),"\n",(0,s.jsxs)(n.li,{children:["Krew plugins repo: ",(0,s.jsx)(n.a,{href:"https://krew.sigs.k8s.io/plugins/",children:"https://krew.sigs.k8s.io/plugins/"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/glasskube/glasskube",children:(0,s.jsx)(n.img,{src:"https://github.com/glasskube/glasskube/assets/38757612/05a03edf-7d6a-48fd-9b24-598abcfd1e9a",alt:"Screenshot 2024-04-26 at 10 54 54"})})}),"\n",(0,s.jsx)(n.p,{children:"If you like this sort of content and would like to see more of it, please consider supporting us by giving us a Star on GitHub \ud83d\ude4f"}),"\n",(0,s.jsx)("div",{style:{display:"flex",justifyContent:"left"},children:(0,s.jsx)(a.A,{href:"https://github.com/glasskube/glasskube"})}),"\n",(0,s.jsx)(l.Ay,{category:"Guides",categoryId:"DIC_kwDOLDumD84CfK3R"})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},51852:(e,n,t)=>{t.d(n,{Ay:()=>o,t2:()=>r});var s=t(96540),i=t(12171),a=t(7710),l=t(74848);function o(e){let{category:n,categoryId:t}=e;const{colorMode:o}=(0,a.G)(),r=e=>{if("https://giscus.app"!==e.origin)return;if("object"!=typeof e.data||!e.data.giscus)return;const n=e.data.giscus;if(n.discussion&&n.viewer){const e=n.viewer.login;if(e.includes("giscus")&&e.includes("bot"))return;const t=n.viewer.url;window.posthog&&window.posthog.setPersonProperties({github_url:t})}};return(0,s.useEffect)((()=>(window.addEventListener("message",r),()=>{window.removeEventListener("message",r)})),[]),(0,l.jsx)(i.A,{repo:"glasskube/glasskube",repoId:"R_kgDOLDumDw",category:n,categoryId:t,mapping:"title",strict:"0",reactionsEnabled:"1",emitMetadata:"1",inputPosition:"top",theme:o,lang:"en",loading:"lazy"})}function r(){return(0,l.jsx)(o,{category:"Blog",categoryId:"DIC_kwDOLDumD84CfCte"})}},24401:(e,n,t)=>{t.d(n,{A:()=>a});t(96540);var s=t(20072),i=t(74848);const a=e=>{let{href:n,...t}=e;return(0,i.jsx)(s.A,{href:n,"data-color-scheme":"no-preference: light; light: light; dark: light;","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":`Star ${n} on GitHub`,...t,children:"Star"})}}}]);